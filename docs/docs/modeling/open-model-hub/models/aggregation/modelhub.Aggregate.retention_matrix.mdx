---
id: open-model-hub-models-aggregation-modelhub-aggregate-retention-matrix
slug: /modeling/open-model-hub/models/aggregation/retention_matrix/
title: retention_matrix
---

# modelhub.Aggregate.retention_matrix

<div className="method">

### <span className="name">retention_matrix</span>

<small className="parameter-list">(<span className="parameter" id="data">data</span>, <span className="parameter" id="time_period">time_period='monthly'</span>, <span className="parameter" id="event_type">event_type=None</span>, <span className="parameter" id="start_date">start_date=None</span>, <span className="parameter" id="end_date">end_date=None</span>, <span className="parameter" id="percentage">percentage=False</span>, <span className="parameter" id="display">display=True</span>)</small>


&#8203;<span className="view-source">[[source]](https://github.com/objectiv/objectiv-analytics/blob/main/modelhub/modelhub/aggregate.py)</span>

<div className="content">

Finds the number of users in a given cohort who are active at a given time
period, where time is computed with respect to the beginning of each cohort.
The “active user” is the user who made an action that we are interested in
that time period.
Users are divided into mutually exclusive cohorts, which are then
tracked over time. In our case users are assigned to a cohort based on
when they made their first action that we are interested in.

Returns the retention matrix dataframe, it represents users retained across cohorts:

* index value represents the cohort
* columns represent the number of given date period since the current cohort
* values represent number (or percentage) of unique active users of a given cohort

One can calculate the retention matrix for a given time range, for that
one can specify start_date a/o end_date.
N.B. the users’ activity starts to be traced from the first date the user is seen in the `data`.


#### Parameters

* **`data`** ([bach.dataframe.DataFrame](/modeling/bach/api-reference/DataFrame/bach.DataFrame.mdx)) – [`bach.DataFrame`](/modeling/bach/api-reference/DataFrame/bach.DataFrame.mdx) to apply the method on.
* **`time_period`** (str) – can be ‘daily’, ‘weekly’, ‘monthly’ or ‘yearly’.
* **`event_type`** (Optional[str]) – the event/action that we are interested in.
Must be a valid event_type (either parent or child).
if None we take all the events generated by the user.
* **`start_date`** (Optional[str]) – start date of the retention matrix, e.g. ‘2022-04-01’
if None take all the data.
* **`end_date`** (Optional[str]) – end date of the retention matrix, e.g. ‘2022-05-01’
if None take all the data.
* **`percentage`** – if True calculate percentage with respect to the number of a users
in the cohort, otherwise it leaves the absolute values.
* **`display`** – if display==True visualize the retention matrix as a heat map



#### Returns

retention matrix bach DataFrame.



#### Return type

[bach.dataframe.DataFrame](/modeling/bach/api-reference/DataFrame/bach.DataFrame.mdx)




import VimeoPlayer from '@site/src/components/vimeo-player';

<VimeoPlayer id="product-demo-retention-matrix" videoId="723381969" paddingBottom="58.25%" />


</div>


</div>
